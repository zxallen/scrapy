var HomepageImgViewer;(function(){function ir(){var n=_ge("sh_rdiv");n&&(sj_be(n,pi,function(){hp_addclass(n,ti)}),sj_be(n,ut,function(){hp_removeclass(n,ti)}))}function rr(){var n=_ge("hp_cellCenter");return n&&n.className.indexOf("hp_hd")!=-1&&typeof g_img!==h&&hp_defined(g_img.hdurl)&&g_img.url==g_img.hdurl?!0:!1}function ri(n,t,r){var u=sj_gx(),e="hp",o=_H.vert?e:"js",f=hp_pushparams(["format="+o,"idx="+n,"n="+t,"nc="+sb_gt(),"pid=hp"]),s,h;_w.g_vidOn&&f.push("video=1");_H.quiz&&f.push("quiz=1");_H.favs&&f.push("fav=1");_H.shdlg&&f.push("og=1");_H.archiveIID&&_w._G&&_G.IG&&_G.P&&(f.push("IG="+_G.IG),s=_H.archiveIID+n,f.push("IID="+_G.P+"."+s));h="/HPImageArchive.aspx?"+f.join("&");u.open("GET",h,!0);sj_be(u,"readystatechange",function(){var h,t,s,c,f;if(u.readyState==4&&u.status==200){if(h=void 0,t=void 0,o==e){if(s=sj_ce("div"),s.innerHTML=u.responseText,s.children.length<1)return;c=s.getElementsByClassName("json")[0];h=c.textContent;t=s.getElementsByClassName("html")[0]}else h=u.responseText;if(i=ur(h),t&&t.children&&i&&i.images)for(f=0;f<t.children.length&&f<i.images.length;f++)i.images[f].html=t.children[f];w=Math.min(et,n+(i&&i.images&&i.images.length)||0);r(!!i)}});u.send(null)}function ur(n){if(typeof n!="string"||!n)return null;if(_w.JSON&&_w.JSON.parse)try{return _w.JSON.parse(n)}catch(t){}try{return new Function("return "+n)()}catch(t){return null}}function fr(){for(var n=0,t=i.images.length;n<t;n++)lt(n,n)}function lt(t,r){var o;if(n[t]=i.images[r]||null,di){var u=Math.max(screen.height,screen.width),f=Math.min(screen.height,screen.width),e="//"+window.location.host+"/iod/";n[t].url=e+u+"/"+f+"/"+n[t].fullstartdate;n[t].portraiturl=e+f+"/"+u+"/"+n[t].fullstartdate}else tr&&(o="_1920x1080.jpg",n[t].url=n[t].urlbase+o);i.quiz&&(n[t].quiz=i.quiz);i.fav&&(n[t].fav=i.fav);i.og&&(n[t].og=i.og)}function ui(i){var r=t+1;b[r]||r>=et?it():n[r]?fi(r):ri(r,1,function(n){n?(lt(r,0),fi(r)):it();typeof i=="function"&&i(n)})}function er(){var n=_w.g_prefetch;n&&(n.Im&&or(n.Im),n.Vid&&sr(n.Vid))}function or(n){var t=new Image;t.onload=function(){var t=sj_cook.get("_SS","bIm");t=t&&t.length>=3?t.substring(t.length-3)+n.hash:n.hash;sj_cook.set("_SS","bIm",t,!1,"/")};t.src=n[k]}function sr(n){var t=sj_ce("video","prefVid"),i,u,r;try{t.setAttribute("preload","auto")}catch(f){}for(t.width=956,t.height=512,i=0,u=n.length;i<u;i++)r=sj_ce("source"),r.src=n[i][2],r.type=n[i][1],t.appendChild(r);t.style.display="none";sj_b.appendChild(t);sj_be(t,"canplaythrough",function(){var n=_ge("prefVid");n&&sj_b.removeChild(n)})}function fi(t){if(!b[t]){it();var i=n[t],r=new Image;r.onload=function(){sj_evt.fire("onHPIVImg"+t,t);b[t]=1};r.src=_w.g_vidOn&&i.vid?i.vid.image:i[k]}}function hr(){var i=_ge("audioElm"),n,t;i&&i.pause();n=_ge("audioMain");n&&(n.style.display=ft);t=_ge("hp_audio_info");t&&(t.style.display=ft)}function at(n){t==0||a||(t--,st=1,ei(),hi(1,t));n&&sj_pd(n)}function vt(n){if(t<w-1&&!a&&!ot){var i=t+1;st=1;ot=1;b[i]||vr();sj_evt.bind("onHPIVImg"+i,ar,1);hi(-1,i)}n&&sj_pd(n)}function cr(n){var t=_d.activeElement,i,r;!lr()&&sj_we(t,nr)||sj_we(t,_ge(ki))||(i=37,r=39,n.key=="ArrowLeft"||n.keyCode==i?(li(n),_w.Log&&Log.Log&&Log.Log("Show","HP","ArrowLeftImg",!1)):(n.key=="ArrowRight"||n.keyCode==r)&&(ai(n),_w.Log&&Log.Log&&Log.Log("Show","HP","ArrowRightImg",!1)))}function lr(){var n=_ge("sb_form_q");return!(n&&n.value&&n.value!=="")}function ar(n){n[1]==t+1&&(t++,ot=0,ei())}function it(){var f=n[t],i=f[ni]=="1"?d:g,o,s,h,c;f.vid&&(o=f.vid.dark,_ge("sh_pl").parentNode.className=o?"sh_pll":"sh_pld",_ge("sh_ps").parentNode.className=o?"sh_psl":"sh_psd",i=o?d:g);s=i+"dis";e&&(e.className=i,h=e.href===nt?wt:pt,e.style.cursor=h);t===w-1?(r.firstChild.className=s,_w.hp_disable(r)):(r.firstChild.className=i,_w.hp_enable(r));t==0?(u.firstChild.className=s,_w.hp_disable(u)):(u.firstChild.className=i,_w.hp_enable(u));r.title=y.previous;u.title=y.next;c=st?"nav":"";sj_evt.fire("updateHpImg",f,c)}function vr(){r.title=y.loading}function ei(){a=1;ui(null);l&&l.disable();var n=_ge("vid");_w.g_vidOn&&(VM.InFoc=0,n&&n.style.opacity!="0"&&(n.onended=null,VM.hideControls()));_ge("sh_iga")&&hr();gt[t]?a=0:ht.down(yr)}function yr(){var o;s.style.display=ft;var i=n[t],r=_ge("vid"),f=_ge("sc_mktb"),e=n[t].fullstartdate,h=e.substr(0,8)+"_"+e.substr(8,4),u;if(r&&_w.g_vidOn&&VM&&(r.pause&&!r.paused&&r.pause(),r.style.display="none",sj_so(r,0),VM.Loaded=!1,_w.g_vid=null,i.vid)){if(oi(i.vid.caption,i.copyrightlink),u="url('"+i.vid.image+"')",s.style.backgroundImage=u,s.style.display=dt,i.vid.loop){r.onended=VM.play;try{r.setAttribute("loop","true")}catch(c){}}else{r.onended=VM.end;try{r.removeAttribute("loop")}catch(c){}}_w.g_vid=i.vid.sources;VM.InFoc=1;VM.sa_vid_ld(pr);ht.up(si)}i.vid||(oi(i.copyright,i.copyrightlink),u=i[k],u="url('"+u+"')",s.style.backgroundImage=u,s.style.filter=_w.sb_i8l?"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+i[k]+"', sizingMethod='scale') progid:DXImageTransform.Microsoft.Alpha(opacity=0);":"",s.style.display=dt,ht.up(si));sj_evt.fire("onHPImgViewerNavigation",h);sj_evt.fire("CurImageIdx",t);f&&(o=_ge("hp_husb"),f.style.display=!!o||i.vid?"none":"block")}function oi(n,t){var i=typeof t==h||t==""||t==nt,r=_ge("musCard");e&&(r?e.href=nt:(e.title=n,e.href=i?nt:t,e.style.cursor=i?wt:pt))}function pr(){var n=_ge("vid");n&&VM&&VM.InFoc&&(VM._autoPlay===!1?VM.pause():VM.play(),VM.Loaded=!0,n.style.display="block",sj_so(n,100))}function si(){var s,e;if(a=0,s=n[t],_w.g_hot){e=s.hs;for(var i=0,c=void 0,r=void 0,v=void 0,o=void 0,y=e.length;i<y;i++){if(i>=e.length){typeof _w.g_triggerElems!==h&&(_w.g_triggerElems[i].isHotSpotDisabled=!0);continue}else typeof _w.g_triggerElems!==h&&(_w.g_triggerElems[i].isHotSpotDisabled=!1);c=i+1;r=e[i];v=_ge("sc_hst"+c);v.style.left=r.locx+"%";v.style.top=r.locy+"%";o=_ge("sc_hs"+c);o.href=r.link;o.firstChild.innerHTML=r.desc;o.firstChild.nextSibling.innerHTML=r.query}l&&l.intro(1)}var b=_ge("hp_pgNav"),k=b?2:0,p=_ge("hp_pgbar");if(p)for(var w=p.getElementsByTagName("h3"),d=w.length,g=s.msg,i=0,f=void 0,u=void 0,y=d;i<y;i++){if(f=g[i],!f)break;if(u=w[i+k],!u)break;u.parentNode.id!==yi&&(u.innerHTML=f.title,u.nextSibling.innerHTML=f.text,u.nextSibling.href=f.link)}}function hi(n){if(typeof _w.hpl!==h){if(_w.hpl&&(o=_w.hpl),o&&o.ssd){var t=o.ssd,i=new Date(parseInt(t.substr(0,4),10),t.substr(4,2)-1,parseInt(t.substr(6,2),10)+n);o.ssd=i.getFullYear().toString()+ci(i.getMonth()+1)+ci(i.getDate())+"_"+t.substr(9,4)}o&&(_w.hpl=o)}}function ci(n){return(n<10?"0":"")+n}function wr(){yt(c)}function yt(n){sj_evt&&sj_evt.fire(wi,n)}function li(i){sj_pd(i);t==0&&n&&n.length==1?f(sj_wf(vt,i)):vt(i)}function ai(i){sj_pd(i);t==0&&n&&n.length==1?f(sj_wf(at,i)):at(i)}function f(n){sb_st(sj_wf(ui,n),1);sj_ue(r,p,f);sj_ue(u,p,f);sj_ue(r,c,f);sj_ue(u,c,f)}function vi(){ri(0,ct,function(e){var o,h,l,s;if(e){if(t=0,tt!=null)for(fr(),o=0;o<w;o++)n[o].fullstartdate==tt&&(t=o);else lt(0,0);y=y||i.tooltips;sj_be(r,rt,vt);sj_be(u,rt,at);r.firstChild.style.visibility=bt;u.firstChild.style.visibility=bt;_H.hpaimg&&sj_be(_d,ut,cr);h=_ge("sh_pl");l=_ge("sh_ps");it();r.firstChild.className=n[t][ni]=="1"?d:g;_w.hp_enable(r);n[t].vid&&(s=n[t].vid.dark,h.parentNode.className=s?"sh_pll":"sh_pld",l.parentNode.className=s?"sh_psl":"sh_psd",r.firstChild.className=s?d:g);gi&&(sj_be(r,kt,li),sj_be(u,kt,ai));sj_be(r,p,f);sj_be(u,p,f);sj_be(r,c,f);sj_be(u,c,f)}})}function br(){var n,o,t,f,e,i;if(r&&u&&(ir(),!_w.g_IMVL)){if(typeof _w.g_IMVL!==h&&(_w.g_IMVL=1),sj_evt.bind("onHPHS",function(n){l=n[1]},1),n=_ge("vid"),n&&!_H.forceAudio&&(n.muted=!0,n.volume=0),v&&(sj_be(v,c,wr),sj_be(v,ut,yt),ii&&sj_be(ii,rt,yt)),o=new RegExp("[\\?&]ssd=([^&#]*)"),t=o.exec(_w.location.href),t!=null&&t[1]!=null&&(tt=t[1].replace("_",""),ct=et),f=!0,_w.QuickSettings)for(e=_w.QuickSettings.getActiveSettings(),i=0;i<e.length;++i)e[i].name==="DisableIOTD"&&(f=!1);f?(vi(),sj_evt.bind("onRBComplete",function(){var n=_w.sched;_w.g_hptse&&n&&n.schedule({ns:"H",task:function(){n.complete("H")}});er()},1)):_H.initIV=vi}}var pt="pointer",wt="default",h="undefined",bt="visible",yi="hp_pgps",c="focus",rt="click",ut="keydown",pi="mousedown",p="mouseover",kt="touchstart",wi="hpsbact",bi="div",dt="block",ft="none",et=8,w=0,t=0,ot=0,o=null,st=0,n=[],b=[],gt=[],l,k="url",ni="bot",ki="fbpgdg",s=_ge("bgDiv"),di=_ge("bgDivPortrait"),r=_ge("sh_igl"),u=_ge("sh_igr"),a=0,e=_ge("sh_cp"),d="sc_light",g="sc_dark",ti="no_outline",nt="javascript:void(0)",i=null,gi="ontouchstart"in _w,nr=_ge("sbox"),v=_ge("sb_form_q"),ii=v&&v.parentNode,y,ht=_anim.fadeE(s,500),kr=_ge("sc_hdu"),dr=_ge("id_h"),tr=rr(),ct,tt;_w.hp_overrideImg=function(n,t){gt[n]=t};ct=1;tt=null;sj_evt.bind("onBgSet",br,1)})(HomepageImgViewer||(HomepageImgViewer={}))